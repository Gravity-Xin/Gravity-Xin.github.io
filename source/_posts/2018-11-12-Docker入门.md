---
title: Docker入门
date: 2018-11-12 10:58:35
categories: 
- Docker/K8S
tags: 
- Docker
comments: true
---

## 概念

- C/S架构: Client-Deamon
- Image: 镜像(静态)
  - 使用分层的文件系统，bootfs(引导文件系统)->rootfs(操作系统)
  - 使用联合加载技术在rootfs上面加载更多层的只读文件系统
  - 镜像名称: 用户名/仓库名(Repository):标签
- Container: 容器(动态)
  - 交互式容器
  - 守护式容器
  - 写时复制特性，使用一个新的读写层来记录镜像的变化
- Registry: 镜像仓库

  整体结构: ![Docker Architecture](/images/docker之基本架构.jpg)

## 常用命令

- 所有的命令按照Container、Image、Network、Volume等进行了分组，以便于记忆

- Container生命周期相关
  - `docker container run [OPTIONS] IMAGE [COMMNAD] [arg...]`: 创建容器并启动容器和运行命令
  - `docker container create [OPTIONS] IMAGE [COMMAND] [arg...]`: 创建容器但并不启动它
  - `docker container start|stop|restart [OPTIONS] CONTAINER [CONTAINER...]`: 启动|停止|重启容器
  - `docker container kill [OPTIONS] CONTAINER`: 想容器发送信号
  - `docker container rm [OPRIONS] CONTAINER [CONTAINER...]`: 删除容器
  - `docker container pause|unpause CONTAINER [CONTAINER...]`: 暂停|恢复容器
  - `docker container exec [OPTIONS] CONTAINER COMMAND [arg...]`: 在运行的容器中执行命令

- Container管理相关
  - `docker container ls [OPTIONS]`: 列出容器
  - `docker container inspect [OPTIONS] CONTAINER`: 查看容器的元数据
  - `docker container top CONTAINER`: 查看容器中运行的进程
  - `docker container attach [OPTIONS] CONTANER`: 连接到正在运行的容器中
  - `docker container logs [OPTIONS] CONTAINER`: 查看容器中进程的日志
  - `docker container export [OPTIONS] CONTAINER`: 将容器中的文件系统打包为tar文件
  - `docker container commit [OPTIONS] CONTAINER`: 从指定容器创建一个新的镜像
  - `docker container cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH`: 文件从容器拷贝到宿主机
  - `docker container cp [OPTIONS] SRC_PATH CONTAINER:DEST_PATH`: 文件从宿主机拷贝到容器
  - `docker container diff CONTAINER`: 查看容器中文件结构的变化信息

- 本地Image管理相关

  - `docker image ls [OPTIONS]`: 列出本地镜像
  - `docker image rm [OPTIONS] IMAGE [IMAGE...]`: 删除镜像
  - `docker image tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]`: 对本地的一个原始镜像进行标记，生成一个新的镜像
  - `docker image build [OPTIONS] PATH|URL|-`: 基于Dockerfile创建镜像
  - `docker image history [OPTIONS] IMAGE`: 查询镜像的创建历史
  - `docker image save [OPTIONS] IMAGE`: 将镜像保存为tar文件
  - `docker image import [OPTIONS] FILE|URL|- [REPOSITORY[:TAG]]`: 从tar文件中创建镜像

- Registry相关

  - `docker login [OPTIONS] [SERVER]`: 登录到镜像仓库
  - `docker logout`: 从镜像仓库登出
  - `docker image pull [OPTIONS] NAME[:TAG|@DIGEST]`: 从镜像仓库中拉取或更新镜像
  - `docker image push [OPTIONS] NAME[:TAG]`: 将本地镜像上传到镜像仓库
  - `docker search [OPTIONS]`: 搜索镜像

- Other
  - `docker info`: 查看Docker系统信息
  - `docker version`: 查看Docker版本